---
title: "操作系统系列之——程序"
date: 2020-12-21T21:24:06+08:00
tags: ["os", "program", "c"]
categories: ["code"]
draft: false
---

> 这是这个系列的第一篇文章，如果对后续感兴趣，可以不时检查[os](https://blog.jabingp.cn/tags/os/)是否更新。

## 1. 什么是程序

> 计算机程序是**一组**指示电子计算机或其他具有消息处理能力设备每一步动作的**指令**。————《[维基百科：计算机程序](https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F)》

## 2. 程序有啥用

定义中也提到了**程序**是*指示每一步动作*的**指令**，简单的说，程序就是实现某个目标所需要经历的步骤。

举一个现实中的例子，当我的目标是**得到一杯手冲咖啡**时，那我实现这个目标的**程序**就是：

1. 取出一包咖啡豆、V60滤杯、V60滤纸、自己喜欢的咖啡杯、够用的电子秤、尽量贵的咖啡磨豆机、一个能倒出水的手冲壶。
2. 用电子秤秤出15g咖啡豆。
3. 用咖啡磨豆机研磨咖啡豆，得到咖啡粉。
4. 将手冲壶装满水。
5. 将手冲壶里的水加热到90°
6. 将V60滤纸放入V60滤杯中，用热水湿润后，倒干多余的水。
7. 将咖啡粉倒入V60滤杯，滤杯架放在咖啡杯上。
8. 将热水倒入滤杯，用电子秤观察自己的倒入的水量到达225g时停止。
9. 等待所有热水通过滤杯滴入咖啡杯，移开滤杯。

>如果你发现你看不懂这个程序，没有关系这是正常的，你只需要知道这个复杂的一系列流程其实就相当于计算机中的一个**程序**，它给出了实现**得到一杯手冲咖啡**这个目标所需要的步骤。但如果你发现这个**程序**简直跟自己每天在做的一样，请留下评论让我们交个朋友！

## 3. 源代码

前面举了一个比较抽象的例子，也许有的人已经get到了，有的人还是一脸雾水，接下来会继续用更具体的例子，不过这要求你对**C语言**和**命令行**有简单的了解。

你现在有一个很简单的目标：**向屏幕输出三次"HelloWorld!"**，你很轻易地想到了你可以利用你曾学的**C语言**去实现：

```c
#include <stdio.h>
int main(){
    for(int i=0; i<3; i++){
        printf("No.%d: HelloWorld!\n",i);
    }
    return 0;
}
```

回顾一下这个段非常简单的源代码，除了必要的`include`、`main`、`return`等结构，核心的代码只有三行，用`for`循环`3`次，在循环内`printf`：

```c
for(int i=0; i < 3; i++){
    printf("No.%d: HelloWorld!\n",i);
}
```

除了必要的结构外，实际上我们就是用这三行代码去**描述了**如何实现我们需要的目标。这是**C语言**（或者**Python**、**Java**、**JS**、**Golang**）提供给我们的一种**描述的能力**。但是到目前为止，我们所编写的这几行代码还停留在**文本**这个阶段，这是一段你能**读懂**、**修改**的**文本**，但它们并不是计算机能够**识别并执行**的**指令**。

## 4. 编译源代码

让**源代码**成为**程序**也很简单，对于C语言而言，只需要用C语言的**编译器**去**编译**源代码即可。

## 4.1. 编译器做了什么

简单地说，编译器将我们写的**源代码**翻译成了机器能执行的**二进制**。

因为计算机是二进制的，在计算机的底层世界里都是`0`和`1`，但是我们直接用`0`和`1`去给计算机写程序、下指令太过**反人类**，为了便于**我们与计算机的对话**，**编程语言**应运而生。

**编程语言**是更接近人能读懂的语言（尽管它依旧有不小的上手难度，但已经比更底层的指令已经好太多了），虽然人能更方便地使用编程语言编写程序了，但计算机很蠢只懂**二进制**，为了让**计算机也能理解**我们所编写的内容，就需要**编译器**来充当这中间的**翻译官**。

## 4.2. 简单的编译尝试

> 以下操作在类Unix系统中进行，不同操作系统的编译工具可能会不同。

将`3`中的源代码保存为`main.c`，**打开命令行进入当前目录**，利用`gcc`编译工具去编译源代码，指令如下：

```bash
cd $源代码所在文件夹
gcc main.c
```

现在main.c所在文件夹包含内容如下：

- main.c
- a.out

通过gcc编译后得到了一个二进制可执行文件`a.out`。此时它被保存在硬盘的中，并且计算机也能够执行它，这时候我们才终于通过源代码获得了一个**程序**。
